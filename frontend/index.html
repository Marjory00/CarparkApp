<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚗 CarparkApp | Unified Access & Parking Management</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>

    <header>
        <h1>🚗 CarparkApp Management System</h1>
        <div id="auth-controls">
            <span id="user-info-display"></span>
            <button id="logout-btn" style="display:none;">Logout</button>
        </div>
    </header>

    <div id="main-dashboard" class="view-container">

        <nav class="tabs-nav">
            <button class="tab-button active" data-tab="parking-passes-tab">Parking Passes 🎫</button>
            <button class="tab-button" data-tab="visitor-log-tab">Visitor Log 📋</button>
            <button class="tab-button" data-tab="towing-violations-tab">Towing & Violations 🚨</button>
            <button class="tab-button" data-tab="resident-management-tab">Resident Management 🏠</button>
            
            <button class="tab-button manager-only" data-tab="system-log-tab">System Log 📝</button>
            <button class="tab-button manager-only" data-tab="user-management-tab">User Management 🔑</button>
        </nav>

        <main class="tabs-content">

            <section id="parking-passes-tab" class="tab-content">
                <h2>🎫 Digital Parking Pass Management</h2>
                <div class="card">
                    <form id="pass-form">
                        <div class="form-group"><label for="pass-plate">License Plate:</label><input type="text" id="pass-plate" required placeholder="XYZ 123"></div>
                        <div class="form-group"><label for="pass-unit">Unit Number:</label><input type="text" id="pass-unit" required placeholder="Apt 101"></div>
                        <div class="form-group"><label for="pass-duration">Duration (Hours):</label><input type="number" id="pass-duration" value="24" required></div>
                        <button type="submit" class="btn primary-btn">Generate Pass</button>
                    </form>
                </div>
                <h3>Active Passes</h3>
                <table id="active-passes-table" class="data-table">
                    <thead><tr><th>Plate</th><th>Unit</th><th>Expires</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="visitor-log-tab" class="tab-content" style="display:none;">
                <h2>📋 Visitor Check-In/Check-Out</h2>
                <div class="card">
                    <form id="checkin-form">
                        <div class="form-group"><label for="visitor-name">Visitor Name:</label><input type="text" id="visitor-name" required></div>
                        <div class="form-group"><label for="visitor-unit">Resident Unit:</label><input type="text" id="visitor-unit" required></div>
                        <div class="form-group"><label for="visitor-type">Visitor Type:</label>
                            <select id="visitor-type">
                                <option value="Guest">Guest</option>
                                <option value="Delivery">Delivery/Service</option>
                                <option value="Contractor">Contractor/Repair</option>
                            </select>
                        </div>
                        <button type="submit" class="btn primary-btn">Check In</button>
                    </form>
                </div>
                <h3>Current Visitors</h3>
                <table id="current-visitors-table" class="data-table">
                    <thead><tr><th>Name</th><th>Unit</th><th>Check-In</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="towing-violations-tab" class="tab-content" style="display:none;">
                <h2>🚨 Enforcement & Violation Logging</h2>
                <p class="warning-message">**Liability Warning:** Ensure all actions comply with property policy before logging an enforcement event.</p>
                <div class="card">
                    <form id="violation-form">
                        <div class="form-group"><label for="violation-plate">License Plate:</label><input type="text" id="violation-plate" required placeholder="ABC 789"></div>
                        <div class="form-group"><label for="violation-type">Violation Type:</label>
                            <select id="violation-type">
                                <option value="Warning">Warning</option>
                                <option value="Booted">Booted</option>
                                <option value="Towed">Towed</option>
                            </select>
                        </div>
                        <div class="form-group"><label for="violation-notes">Notes:</label><input type="text" id="violation-notes" placeholder="No parking permit"></div>
                        <button type="submit" class="btn danger-btn">Log Violation</button>
                    </form>
                </div>
                <h3>Plate History Search</h3>
                <input type="text" id="plate-search-input" placeholder="Search license plate history">
                <div id="search-results" class="data-display"></div>
            </section>

            <section id="resident-management-tab" class="tab-content" style="display:none;">
                <h2>🏠 Resident Management</h2>
                <p>Centralized system to manage resident units, primary vehicles, and contact information.</p>
                <div class="card">
                    <h3>Add/Update Resident</h3>
                    <form id="resident-form">
                        <div class="form-group"><label for="res-unit">Unit Number:</label><input type="text" id="res-unit" required placeholder="Apt 101"></div>
                        <div class="form-group"><label for="res-name">Primary Contact:</label><input type="text" id="res-name" required></div>
                        <div class="form-group"><label for="res-phone">Phone (Optional):</label><input type="text" id="res-phone" placeholder="(555) 555-1234"></div>
                        <div class="form-group"><label for="res-plate">Primary Plate (Optional):</label><input type="text" id="res-plate" placeholder="XYZ 789"></div>
                        <button type="submit" class="btn primary-btn">Save Resident</button>
                    </form>
                </div>
                <h3>Active Residents</h3>
                <table id="active-residents-table" class="data-table">
                    <thead><tr><th>Unit</th><th>Contact</th><th>Phone</th><th>Primary Plate</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="system-log-tab" class="tab-content manager-feature" style="display:none;">
                <h2>📝 System Activity Log</h2>
                <p>Displays all critical actions (Pass Creation, Violations, User Login) for accountability.</p>
                <table id="activity-log-table" class="data-table">
                    <thead><tr><th>Timestamp</th><th>User</th><th>Role</th><th>Action</th><th>Details</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

            <section id="user-management-tab" class="tab-content manager-feature" style="display:none;">
                <h2>🔑 User Management</h2>
                <p>Create, edit, or disable Guard and Manager accounts.</p>
                <div class="card">
                    <form id="user-form">
                        <div class="form-group"><label for="new-username">Username:</label><input type="text" id="new-username" required></div>
                        <div class="form-group"><label for="new-password">Password:</label><input type="password" id="new-password" required></div>
                        <div class="form-group"><label for="new-role">Role:</label>
                            <select id="new-role">
                                <option value="Guard">Guard</option>
                                <option value="Manager">Manager</option>
                            </select>
                        </div>
                        <button type="submit" class="btn secondary-btn">Create/Update User</button>
                    </form>
                </div>
                <h3>Current Staff Accounts</h3>
                <table id="user-accounts-table" class="data-table">
                    <thead><tr><th>User ID</th><th>Username</th><th>Role</th><th>Action</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>